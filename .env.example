# ========================================
# Bisheng Enterprise - Environment Variables Template
# ========================================
# نسخ هذا الملف إلى .env وتعديل القيم حسب بيئتك

# ==================== عام ====================
PROJECT_NAME=bisheng-enterprise
ENVIRONMENT=production
COMPOSE_PROJECT_NAME=bisheng
TZ=Asia/Riyadh

# ==================== PostgreSQL ====================
POSTGRES_VERSION=15-alpine
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=bisheng
POSTGRES_USER=bisheng
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=2GB
POSTGRES_EFFECTIVE_CACHE_SIZE=6GB
POSTGRES_MAINTENANCE_WORK_MEM=512MB
POSTGRES_WORK_MEM=10MB

# ==================== Redis ====================
REDIS_VERSION=7.2-alpine
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_HERE
REDIS_MAXMEMORY=4gb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE_ENABLED=true

# ==================== Milvus (Vector Database) ====================
MILVUS_VERSION=v2.3.0
MILVUS_HOST=milvus
MILVUS_PORT=19530
MILVUS_GRPC_PORT=19530
MILVUS_HTTP_PORT=9091
ETCD_VERSION=3.5.5
ETCD_ENDPOINTS=etcd:2379

# ==================== Elasticsearch ====================
ES_VERSION=8.11.0
ES_HOST=elasticsearch
ES_PORT=9200
ES_JAVA_OPTS=-Xms2g -Xmx2g
ELASTIC_PASSWORD=CHANGE_ME_ELASTIC_PASSWORD_HERE
ES_SECURITY_ENABLED=true
ES_BOOTSTRAP_PASSWORD=CHANGE_ME_BOOTSTRAP_PASSWORD

# ==================== MinIO (Object Storage) ====================
MINIO_VERSION=latest
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=CHANGE_ME_MINIO_USER
MINIO_ROOT_PASSWORD=CHANGE_ME_MINIO_PASSWORD_MIN_8_CHARS
MINIO_BUCKET=bisheng
MINIO_REGION=us-east-1

# ==================== Backend (FastAPI) ====================
BACKEND_IMAGE=dataelement/bisheng-backend:latest
BACKEND_HOST=0.0.0.0
BACKEND_PORT=3001
BACKEND_WORKERS=4
BACKEND_TIMEOUT=600
BACKEND_LOG_LEVEL=INFO
BACKEND_RELOAD=false

# JWT & Security
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_hex_32
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=43200
SECRET_KEY=CHANGE_ME_ANOTHER_SECRET_KEY

# Bisheng Config
BISHENG_ROLE=bisheng
BISHENG_RT_URL=http://bisheng-rt:5000

# ==================== Frontend (React + Vite) ====================
FRONTEND_IMAGE=dataelement/bisheng-frontend:latest
FRONTEND_PORT=3000
VITE_API_URL=http://localhost:3001
VITE_APP_TITLE=Bisheng Enterprise

# ==================== Nginx (Reverse Proxy & Load Balancer) ====================
NGINX_VERSION=1.25-alpine
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=2048
DOMAIN=bisheng.local

# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# ==================== AI Models & APIs ====================
# OpenAI
OPENAI_API_KEY=sk-YOUR_OPENAI_API_KEY_HERE
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo

# Anthropic Claude (optional)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-2

# Google AI (optional)
GOOGLE_API_KEY=
GOOGLE_MODEL=gemini-pro

# Local Models
USE_LOCAL_MODELS=true
LOCAL_MODEL_PATH=/models
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
LLM_MODEL=chatglm3-6b

# ==================== Monitoring (Prometheus + Grafana) ====================
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_HOST=prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=30d

GRAFANA_VERSION=10.2.0
GRAFANA_HOST=grafana
GRAFANA_PORT=3002
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD
GRAFANA_ALLOW_SIGNUP=false

ALERTMANAGER_VERSION=v0.26.0
ALERTMANAGER_PORT=9093

# Node Exporter
NODE_EXPORTER_VERSION=v1.7.0
NODE_EXPORTER_PORT=9100

# cAdvisor
CADVISOR_VERSION=v0.47.0
CADVISOR_PORT=8080

# ==================== Backup ====================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=gzip

# S3 Backup (optional)
BACKUP_S3_ENABLED=false
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=bisheng-backups
AWS_S3_REGION=us-east-1
AWS_S3_ENDPOINT=

# Local Backup
BACKUP_LOCAL_PATH=/data/backups

# ==================== Fine-Tuning (GPU Required) ====================
FT_ENABLED=false
FT_GPU_COUNT=0
FT_PYTORCH_VERSION=2.1.0
FT_CUDA_VERSION=11.8
FT_PORT=5001

# ==================== Office Processing ====================
OFFICE_ENABLED=true
LIBREOFFICE_VERSION=latest
OFFICE_CONVERT_TIMEOUT=300

# ==================== ML Advanced ====================
ML_ENABLED=true
JUPYTER_ENABLED=false
JUPYTER_PORT=8888
JUPYTER_TOKEN=CHANGE_ME_JUPYTER_TOKEN

# ==================== Security ====================
SECURITY_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=100

# CORS
CORS_ENABLED=true
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# HTTPS/SSL
FORCE_HTTPS=false

# ==================== Logging ====================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_ROTATION=50M
LOG_MAX_FILES=10
LOG_COMPRESS=true

# ==================== Docker Resources ====================
# Adjust based on your server capacity
# Current: 4-core, 16GB RAM

# Backend
BACKEND_CPU_LIMIT=2
BACKEND_CPU_RESERVATION=1
BACKEND_MEM_LIMIT=4g
BACKEND_MEM_RESERVATION=2g

# Frontend
FRONTEND_CPU_LIMIT=1
FRONTEND_CPU_RESERVATION=0.5
FRONTEND_MEM_LIMIT=1g
FRONTEND_MEM_RESERVATION=512m

# PostgreSQL
POSTGRES_CPU_LIMIT=2
POSTGRES_CPU_RESERVATION=1
POSTGRES_MEM_LIMIT=4g
POSTGRES_MEM_RESERVATION=2g

# Redis
REDIS_CPU_LIMIT=1
REDIS_CPU_RESERVATION=0.5
REDIS_MEM_LIMIT=4g
REDIS_MEM_RESERVATION=2g

# Elasticsearch
ES_CPU_LIMIT=2
ES_CPU_RESERVATION=1
ES_MEM_LIMIT=4g
ES_MEM_RESERVATION=2g

# Milvus
MILVUS_CPU_LIMIT=2
MILVUS_CPU_RESERVATION=1
MILVUS_MEM_LIMIT=4g
MILVUS_MEM_RESERVATION=2g

# MinIO
MINIO_CPU_LIMIT=1
MINIO_CPU_RESERVATION=0.5
MINIO_MEM_LIMIT=2g
MINIO_MEM_RESERVATION=1g

# Nginx
NGINX_CPU_LIMIT=1
NGINX_CPU_RESERVATION=0.25
NGINX_MEM_LIMIT=512m
NGINX_MEM_RESERVATION=256m

# ==================== Advanced Settings ====================
# Docker Network
NETWORK_NAME=bisheng-network
NETWORK_SUBNET=172.28.0.0/16

# Health Check
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s

# Restart Policy
RESTART_POLICY=unless-stopped

# ==================== Development Settings ====================
DEBUG=false
HOT_RELOAD=false
PROFILING_ENABLED=false
