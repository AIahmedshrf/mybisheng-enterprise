# ========================================
#My  Bisheng Enterprise - Production Environment
# ========================================
# ⚠️ تحذير: غيّر جميع كلمات المرور قبل الاستخدام!

# ==================== عام ====================
PROJECT_NAME=bisheng-enterprise
ENVIRONMENT=production
COMPOSE_PROJECT_NAME=bisheng-prod
TZ=Asia/Riyadh
DOCKER_SUBNET=172.20.0.0/16

# ==================== PostgreSQL ====================
POSTGRES_VERSION=15-alpine
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=bisheng_production
POSTGRES_USER=bisheng_prod
POSTGRES_PASSWORD=CHANGE_THIS_TO_VERY_STRONG_PASSWORD_32_CHARS_MIN
POSTGRES_MAX_CONNECTIONS=300
POSTGRES_SHARED_BUFFERS=4GB
POSTGRES_EFFECTIVE_CACHE_SIZE=12GB
POSTGRES_MAINTENANCE_WORK_MEM=1GB
POSTGRES_WORK_MEM=20MB

# ==================== Redis ====================
REDIS_VERSION=7.2-alpine
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD_STRONG_32_CHARS
REDIS_MAXMEMORY=8gb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE_ENABLED=true

# ==================== Milvus ====================
MILVUS_VERSION=v2.3.0
MILVUS_HOST=milvus
MILVUS_PORT=19530
MILVUS_GRPC_PORT=19530
MILVUS_HTTP_PORT=9091
ETCD_VERSION=3.5.5
ETCD_ENDPOINTS=etcd:2379

# ==================== Elasticsearch ====================
ES_VERSION=8.11.0
ES_HOST=elasticsearch
ES_PORT=9200
ES_JAVA_OPTS="-Xms4g -Xmx4g"
ELASTIC_PASSWORD=CHANGE_THIS_ELASTIC_PASSWORD_STRONG_32_CHARS
ES_SECURITY_ENABLED=true
ES_BOOTSTRAP_PASSWORD=CHANGE_THIS_BOOTSTRAP_PASSWORD_32_CHARS

# ==================== MinIO ====================
MINIO_VERSION=latest
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=CHANGE_THIS_MINIO_USER
MINIO_ROOT_PASSWORD=CHANGE_THIS_MINIO_PASSWORD_MIN_32_CHARS
MINIO_BUCKET=bisheng-production
MINIO_REGION=us-east-1

# ==================== Backend ====================
BISHENG_EDITION="Enterprise"
BACKEND_IMAGE=dataelement/bisheng-backend:latest
BACKEND_HOST=0.0.0.0
BACKEND_PORT=3001
BACKEND_WORKERS=8
BACKEND_TIMEOUT=900
BACKEND_LOG_LEVEL=WARNING
BACKEND_RELOAD=false

# JWT & Security (Generate with: openssl rand -hex 32)
JWT_SECRET=CHANGE_THIS_GENERATE_WITH_openssl_rand_hex_32
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=43200
SECRET_KEY=CHANGE_THIS_ANOTHER_SECRET_openssl_rand_hex_32

# Bisheng Config
BISHENG_ROLE=bisheng
BISHENG_RT_URL=http://bisheng-rt:5000

# ==================== Frontend ====================
FRONTEND_IMAGE=dataelement/bisheng-frontend:latest
FRONTEND_PORT=3000
VITE_API_URL=https://api.yourdomain.com
#VITE_APP_TITLE=Bisheng Enterprise
VITE_APP_TITLE="Bisheng Enterprise"

# ==================== Nginx ====================
NGINX_VERSION=1.25-alpine
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=4096
DOMAIN=yourdomain.com

# SSL/TLS (استخدم Let's Encrypt)
SSL_ENABLED=true
SSL_CERT_PATH=./ssl/fullchain.pem
SSL_KEY_PATH=./ssl/privkey.pem

# ==================== AI Models & APIs ====================
OPENAI_API_KEY=sk-YOUR_PRODUCTION_OPENAI_API_KEY
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4

ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-2

GOOGLE_API_KEY=
GOOGLE_MODEL=gemini-pro

# Local Models
USE_LOCAL_MODELS=true
LOCAL_MODEL_PATH=/models
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
LLM_MODEL=chatglm3-6b

# ==================== Monitoring ====================
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_HOST=prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=90d

GRAFANA_VERSION=10.2.0
GRAFANA_HOST=grafana
GRAFANA_PORT=3002
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD_STRONG
GRAFANA_ALLOW_SIGNUP=false

ALERTMANAGER_VERSION=v0.26.0
ALERTMANAGER_PORT=9093

NODE_EXPORTER_VERSION=v1.7.0
NODE_EXPORTER_PORT=9100

CADVISOR_VERSION=v0.47.0
CADVISOR_PORT=8080

# ==================== Backup ====================
# ==================== Backup ====================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=90
BACKUP_COMPRESSION=gzip

# S3 Backup
BACKUP_S3_ENABLED=true
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_ACCESS_Key
AWS_S3_BUCKET=bisheng-production-backups
AWS_S3_REGION=us-east-1
AWS_S3_ENDPOINT=

BACKUP_LOCAL_PATH=/data/backups

# ==================== Features ====================
FT_ENABLED=false
FT_GPU_COUNT=0
FT_PYTORCH_VERSION=2.1.0
FT_CUDA_VERSION=11.8
FT_PORT=5001

OFFICE_ENABLED=true
LIBREOFFICE_VERSION=latest
OFFICE_CONVERT_TIMEOUT=600

ML_ENABLED=true
JUPYTER_ENABLED=false
JUPYTER_PORT=8888
JUPYTER_TOKEN=CHANGE_THIS_JUPYTER_STRONG_TOKEN

# ==================== Security ====================
SECURITY_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

CORS_ENABLED=true
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOW_CREDENTIALS=true

FORCE_HTTPS=true

# ==================== Logging ====================
LOG_LEVEL=WARNING
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_ROTATION=100M
LOG_MAX_FILES=30
LOG_COMPRESS=true

# ==================== Docker Resources (VPS Production) ====================
# تعديل حسب موارد الـ VPS الخاص بك

BACKEND_CPU_LIMIT=4
BACKEND_CPU_RESERVATION=2
BACKEND_MEM_LIMIT=8g
BACKEND_MEM_RESERVATION=4g

FRONTEND_CPU_LIMIT=2
FRONTEND_CPU_RESERVATION=1
FRONTEND_MEM_LIMIT=2g
FRONTEND_MEM_RESERVATION=1g

POSTGRES_CPU_LIMIT=4
POSTGRES_CPU_RESERVATION=2
POSTGRES_MEM_LIMIT=8g
POSTGRES_MEM_RESERVATION=4g

REDIS_CPU_LIMIT=2
REDIS_CPU_RESERVATION=1
REDIS_MEM_LIMIT=8g
REDIS_MEM_RESERVATION=4g

ES_CPU_LIMIT=4
ES_CPU_RESERVATION=2
ES_MEM_LIMIT=8g
ES_MEM_RESERVATION=4g

MILVUS_CPU_LIMIT=4
MILVUS_CPU_RESERVATION=2
MILVUS_MEM_LIMIT=8g
MILVUS_MEM_RESERVATION=4g

MINIO_CPU_LIMIT=2
MINIO_CPU_RESERVATION=1
MINIO_MEM_LIMIT=4g
MINIO_MEM_RESERVATION=2g

NGINX_CPU_LIMIT=2
NGINX_CPU_RESERVATION=0.5
NGINX_MEM_LIMIT=1g
NGINX_MEM_RESERVATION=512m

# ==================== Advanced ====================
NETWORK_NAME=bisheng-prod-network
NETWORK_SUBNET=172.30.0.0/16

HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=15s
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_START_PERIOD=120s

RESTART_POLICY=always

DEBUG=false
HOT_RELOAD=false
PROFILING_ENABLED=false
