# ========================================
# My Bisheng Enterprise - Production Environment
# ========================================
# ⚠️ تحذير: راجع كلمات المرور والمفاتيح بعد النشر!

# ==================== عام ====================
PROJECT_NAME=bisheng-enterprise
ENVIRONMENT=production
COMPOSE_PROJECT_NAME=bisheng-prod
TZ=Asia/Riyadh

# ==================== PostgreSQL ====================
POSTGRES_VERSION=15-alpine
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=bisheng_production
POSTGRES_USER=bisheng_prod
POSTGRES_PASSWORD=StrongPass1234_5678_ABCDEFGH
POSTGRES_MAX_CONNECTIONS=300
POSTGRES_SHARED_BUFFERS=4GB
POSTGRES_EFFECTIVE_CACHE_SIZE=12GB
POSTGRES_MAINTENANCE_WORK_MEM=1GB
POSTGRES_WORK_MEM=20MB

# ==================== Redis ====================
REDIS_VERSION=7.2-alpine
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=RedisStrongPass1234_5678_ijkl
REDIS_MAXMEMORY=8gb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE_ENABLED=true

# ==================== Milvus ====================
MILVUS_VERSION=v2.3.0
MILVUS_HOST=milvus
MILVUS_PORT=19530
MILVUS_GRPC_PORT=19530
MILVUS_HTTP_PORT=9091
ETCD_VERSION=3.5.5
ETCD_ENDPOINTS=etcd:2379

# ==================== Elasticsearch ====================
ES_VERSION=8.11.0
ES_HOST=elasticsearch
ES_PORT=9200
ES_JAVA_OPTS="-Xms4g -Xmx4g"
ELASTIC_PASSWORD=ElasticStrongPass1234_5678_MNO
ES_SECURITY_ENABLED=true
ES_BOOTSTRAP_PASSWORD=BootstrapSecurePass9876_5432_PQR

# ==================== MinIO ====================
MINIO_VERSION=latest
MINIO_HOST=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=bisheng_admin
MINIO_ROOT_PASSWORD=MinioSecurePass9876_5432_XYZ
MINIO_BUCKET=bisheng-production
MINIO_REGION=us-east-1

# ==================== Backend ====================
BISHENG_EDITION="Enterprise"
BACKEND_IMAGE=dataelement/bisheng-backend:latest
BACKEND_HOST=0.0.0.0
BACKEND_PORT=3001
BACKEND_WORKERS=8
BACKEND_TIMEOUT=900
BACKEND_LOG_LEVEL=WARNING
BACKEND_RELOAD=false

# JWT & Security (Generated with: openssl rand -hex 32)
JWT_SECRET=3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=43200
SECRET_KEY=9e8d7c6b5a4f3e2d1c0b9a8d7e6f5d4c

# Bisheng Config
BISHENG_ROLE=bisheng
BISHENG_RT_URL=http://bisheng-rt:5000

# ==================== Frontend ====================
FRONTEND_IMAGE=dataelement/bisheng-frontend:latest
FRONTEND_PORT=3000
VITE_API_URL=https://api.bisheng.ai
VITE_APP_TITLE="Bisheng Enterprise"

# ==================== Nginx ====================
NGINX_VERSION=1.25-alpine
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=4096
DOMAIN=bisheng.ai

# SSL/TLS (استخدم Let's Encrypt)
SSL_ENABLED=true
SSL_CERT_PATH=./ssl/fullchain.pem
SSL_KEY_PATH=./ssl/privkey.pem

# ==================== AI Models & APIs ====================
OPENAI_API_KEY=sk-prod-1234567890abcdef1234567890abcdef
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo

ANTHROPIC_API_KEY=sk-ant-1234567890abcdef1234567890abcdef
ANTHROPIC_MODEL=claude-3-opus

GOOGLE_API_KEY=AIzaSyBdT1234567890abcdef1234567890
GOOGLE_MODEL=gemini-1.5-pro

# Local Models
USE_LOCAL_MODELS=true
LOCAL_MODEL_PATH=/models
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
LLM_MODEL=chatglm3-6b

# ==================== Monitoring ====================
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_HOST=prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=90d

GRAFANA_VERSION=10.2.0
GRAFANA_HOST=grafana
GRAFANA_PORT=3002
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=GrafanaSecurePass1234_5678
GRAFANA_ALLOW_SIGNUP=false

ALERTMANAGER_VERSION=v0.26.0
ALERTMANAGER_PORT=9093

NODE_EXPORTER_VERSION=v1.7.0
NODE_EXPORTER_PORT=9100

CADVISOR_VERSION=v0.47.0
CADVISOR_PORT=8080

# ==================== Backup ====================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=90
BACKUP_COMPRESSION=gzip

# S3 Backup
BACKUP_S3_ENABLED=true
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_S3_BUCKET=bisheng-production-backups
AWS_S3_REGION=us-east-1
AWS_S3_ENDPOINT=https://s3.amazonaws.com

BACKUP_LOCAL_PATH=/data/backups

# ==================== Features ====================
FT_ENABLED=false
FT_GPU_COUNT=0
FT_PYTORCH_VERSION=2.1.0
FT_CUDA_VERSION=11.8
FT_PORT=5001

OFFICE_ENABLED=true
LIBREOFFICE_VERSION=latest
OFFICE_CONVERT_TIMEOUT=600

ML_ENABLED=true
JUPYTER_ENABLED=false
JUPYTER_PORT=8888
JUPYTER_TOKEN=JupyterSecureToken1234567890abcdef

# ==================== Security ====================
SECURITY_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

CORS_ENABLED=true
CORS_ORIGINS=https://bisheng.ai,https://www.bisheng.ai
CORS_ALLOW_CREDENTIALS=true

FORCE_HTTPS=true

# ==================== Logging ====================
LOG_LEVEL=WARNING
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_ROTATION=100M
LOG_MAX_FILES=30
LOG_COMPRESS=true

# ==================== Docker Resources (VPS Production) ====================
BACKEND_CPU_LIMIT=4
BACKEND_CPU_RESERVATION=2
BACKEND_MEM_LIMIT=8g
BACKEND_MEM_RESERVATION=4g

FRONTEND_CPU_LIMIT=2
FRONTEND_CPU_RESERVATION=1
FRONTEND_MEM_LIMIT=2g
FRONTEND_MEM_RESERVATION=1g

POSTGRES_CPU_LIMIT=4
POSTGRES_CPU_RESERVATION=2
POSTGRES_MEM_LIMIT=8g
POSTGRES_MEM_RESERVATION=4g

REDIS_CPU_LIMIT=2
REDIS_CPU_RESERVATION=1
REDIS_MEM_LIMIT=8g
REDIS_MEM_RESERVATION=4g

ES_CPU_LIMIT=4
ES_CPU_RESERVATION=2
ES_MEM_LIMIT=8g
ES_MEM_RESERVATION=4g

MILVUS_CPU_LIMIT=4
MILVUS_CPU_RESERVATION=2
MILVUS_MEM_LIMIT=8g
MILVUS_MEM_RESERVATION=4g

MINIO_CPU_LIMIT=2
MINIO_CPU_RESERVATION=1
MINIO_MEM_LIMIT=4g
MINIO_MEM_RESERVATION=2g

NGINX_CPU_LIMIT=2
NGINX_CPU_RESERVATION=0.5
NGINX_MEM_LIMIT=1g
NGINX_MEM_RESERVATION=512m

# ==================== Advanced ====================
NETWORK_NAME=bisheng-prod-network
NETWORK_SUBNET=172.30.0.0/16

HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=15s
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_START_PERIOD=120s

RESTART_POLICY=always

DEBUG=false
HOT_RELOAD=false
PROFILING_ENABLED=false