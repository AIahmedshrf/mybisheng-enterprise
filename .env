ETCD_VERSION=v3.5.10
# ========================================
# Bisheng Enterprise - Development Environment
# ========================================
# للاستخدام في GitHub Codespace والتطوير المحلي

# ==================== عام ====================
PROJECT_NAME=bisheng-enterprise-dev
ENVIRONMENT=development
COMPOSE_PROJECT_NAME=bisheng-dev
TZ=Asia/Riyadh

# ==================== PostgreSQL ====================
POSTGRES_VERSION=15-alpine
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=bisheng_dev
POSTGRES_USER=bisheng
POSTGRES_PASSWORD=dev_postgres_pass_123
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=512MB
POSTGRES_EFFECTIVE_CACHE_SIZE=2GB
POSTGRES_MAINTENANCE_WORK_MEM=256MB
POSTGRES_WORK_MEM=5MB

# ==================== Redis ====================
REDIS_VERSION=7.2-alpine
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=dev_redis_pass_123
REDIS_MAXMEMORY=2gb
REDIS_MAXMEMORY_POLICY=allkeys-lru
REDIS_SAVE_ENABLED=false

# ==================== Milvus ====================
MILVUS_VERSION=v2.3.0
MILVUS_HOST=milvus
MILVUS_PORT=19530
MILVUS_GRPC_PORT=19530
MILVUS_HTTP_PORT=9091
ETCD_ENDPOINTS=etcd:2379

# ==================== Elasticsearch ====================
ES_VERSION=8.11.0
ES_HOST=elasticsearch
ES_PORT=9200
ES_JAVA_OPTS=-Xms1g -Xmx1g
ELASTIC_PASSWORD=dev_elastic_pass_123
ES_SECURITY_ENABLED=false
ES_BOOTSTRAP_PASSWORD=dev_bootstrap_123

# ==================== MinIO ====================
MINIO_VERSION=latest
MINIO_HOST=minio
MINIO_PORT=9003
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_BUCKET=bisheng-dev
MINIO_REGION=us-east-1

# ==================== Backend ====================
BACKEND_IMAGE=dataelement/bisheng-backend:latest
BACKEND_HOST=0.0.0.0
BACKEND_PORT=3001
BACKEND_WORKERS=2
BACKEND_TIMEOUT=300
BACKEND_LOG_LEVEL=DEBUG
BACKEND_RELOAD=true

# JWT & Security
JWT_SECRET=dev-jwt-secret-not-for-production-use
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=43200
SECRET_KEY=dev-secret-key-not-for-production

# Bisheng Config
BISHENG_ROLE=bisheng
BISHENG_RT_URL=http://bisheng-rt:5000

# ==================== Frontend ====================
FRONTEND_IMAGE=dataelement/bisheng-frontend:latest
FRONTEND_PORT=3000
VITE_API_URL=http://localhost:3001
VITE_APP_TITLE=Bisheng Enterprise (Dev)

# ==================== Nginx ====================
NGINX_VERSION=1.25-alpine
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
NGINX_WORKER_PROCESSES=2
NGINX_WORKER_CONNECTIONS=1024
DOMAIN=localhost

SSL_ENABLED=false
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# ==================== AI Models & APIs ====================
# OpenAI (استخدم مفتاحك الحقيقي هنا)
OPENAI_API_KEY=sk-YOUR_OPENAI_KEY_HERE
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo

# Optional APIs
ANTHROPIC_API_KEY=
GOOGLE_API_KEY=

# Local Models
USE_LOCAL_MODELS=true
LOCAL_MODEL_PATH=/models
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
LLM_MODEL=chatglm3-6b

# ==================== Monitoring ====================
PROMETHEUS_VERSION=v2.48.0
PROMETHEUS_HOST=prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=7d

GRAFANA_VERSION=10.2.0
GRAFANA_HOST=grafana
GRAFANA_PORT=3002
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ALLOW_SIGNUP=true

ALERTMANAGER_VERSION=v0.26.0
ALERTMANAGER_PORT=9093

NODE_EXPORTER_VERSION=v1.7.0
NODE_EXPORTER_PORT=9100

CADVISOR_VERSION=v0.47.0
CADVISOR_PORT=8080

# ==================== Backup ====================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 4 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_COMPRESSION=gzip
BACKUP_S3_ENABLED=false
BACKUP_LOCAL_PATH=/data/backups

# ==================== Features ====================
FT_ENABLED=false
FT_GPU_COUNT=0

OFFICE_ENABLED=true
LIBREOFFICE_VERSION=latest
OFFICE_CONVERT_TIMEOUT=300

ML_ENABLED=true
JUPYTER_ENABLED=true
JUPYTER_PORT=8888
JUPYTER_TOKEN=dev-jupyter-token-123

# ==================== Security (Relaxed for Dev) ====================
SECURITY_ENABLED=false
RATE_LIMIT_ENABLED=false
RATE_LIMIT_PER_MINUTE=1000
RATE_LIMIT_BURST=2000

CORS_ENABLED=true
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

FORCE_HTTPS=false

# ==================== Logging ====================
LOG_LEVEL=DEBUG
LOG_FORMAT=text
LOG_TO_FILE=true
LOG_ROTATION=10M
LOG_MAX_FILES=5
LOG_COMPRESS=false

# ==================== Docker Resources (Codespace: 4-core, 16GB) ====================
# محسّنة للـ Codespace

BACKEND_CPU_LIMIT=1.5
BACKEND_CPU_RESERVATION=0.5
BACKEND_MEM_LIMIT=3g
BACKEND_MEM_RESERVATION=1g

FRONTEND_CPU_LIMIT=0.5
FRONTEND_CPU_RESERVATION=0.25
FRONTEND_MEM_LIMIT=512m
FRONTEND_MEM_RESERVATION=256m

POSTGRES_CPU_LIMIT=1
POSTGRES_CPU_RESERVATION=0.5
POSTGRES_MEM_LIMIT=2g
POSTGRES_MEM_RESERVATION=1g

REDIS_CPU_LIMIT=0.5
REDIS_CPU_RESERVATION=0.25
REDIS_MEM_LIMIT=2g
REDIS_MEM_RESERVATION=512m

ES_CPU_LIMIT=1
ES_CPU_RESERVATION=0.5
ES_MEM_LIMIT=2g
ES_MEM_RESERVATION=1g

MILVUS_CPU_LIMIT=1
MILVUS_CPU_RESERVATION=0.5
MILVUS_MEM_LIMIT=2g
MILVUS_MEM_RESERVATION=1g

MINIO_CPU_LIMIT=0.5
MINIO_CPU_RESERVATION=0.25
MINIO_MEM_LIMIT=1g
MINIO_MEM_RESERVATION=512m

NGINX_CPU_LIMIT=0.5
NGINX_CPU_RESERVATION=0.1
NGINX_MEM_LIMIT=256m
NGINX_MEM_RESERVATION=128m

# ==================== Advanced ====================
NETWORK_NAME=bisheng-dev-network
NETWORK_SUBNET=172.29.0.0/16

HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s

RESTART_POLICY=unless-stopped

DEBUG=true
HOT_RELOAD=true
PROFILING_ENABLED=true
